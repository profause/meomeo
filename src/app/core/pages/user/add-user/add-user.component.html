<app-bar title="Enter user details"></app-bar>
<main class="container" style="margin-top: 80px">
  <div class="row align-items-center">
    <nav class="col-12" aria-label="breadcrumb">
      <ol class="p-0 m-0 breadcrumb" style="background: transparent !important">
        <li class="breadcrumb-item"><a routerLink="/home">Home</a></li>
        <li class="breadcrumb-item"><a routerLink="/users">users</a></li>
        <li class="breadcrumb-item active" aria-current="page">add user</li>
      </ol>
    </nav>
    <div class="col-12 mt-3">
      <form
        [formGroup]="addUserFormGroup"
        #addUserForm="ngForm"
        name="addUserFormGroup"
        (ngSubmit)="addUserForm.valid && submit()"
        class="form-row"
      >
        <div class="col-12">
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Full name</mat-label>
            <input
              formControlName="fullname"
              matInput
              class="text-bold"
              type="text"
              id="fullname"
              name="fullname"
              required
              autocomplete="off"
              [ngClass]="{
                'is-invalid':
                  addUserForm.submitted &&
                  addUserFormGroup.get('fullname')?.hasError('required')
              }"
              aria-describedby="fullnameHint"
            />
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field appearance="outline" style="width: 100%">
            <mat-label>Mobile number</mat-label>
            <input
              formControlName="mobileNumber"
              matInput
              type="text"
              id="mobileNumber"
              name="mobileNumber"
              autocomplete="off"
              required
              [ngClass]="{
                'is-invalid':
                  addUserForm.submitted &&
                  addUserFormGroup.get('mobileNumber')?.hasError('required')
              }"
              aria-describedby="mobileNumberHint"
            />
          </mat-form-field>
        </div>
        <div class="col-12">
          <mat-form-field
            appearance="outline"
            style="width: 100%"
            [ngClass]="{
              'is-invalid':
                addUserForm.submitted &&
                addUserFormGroup.get('role')?.hasError('required')
            }"
          >
            <mat-label>Table name pattern</mat-label>
            <mat-select formControlName="role">
              <mat-option disabled value="" selected>Select a role</mat-option>
              <mat-option value="ATTENDANT">Attendant</mat-option>
              <mat-option value="MANAGER">Manager</mat-option>
              <mat-option value="ADMIN">Administrator</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="col-12">
            <div class="d-flex justify-content-end align-items-center">
                <button mat-flat-button color="accent" type="submit" [disabled]="isLoading || !addUserForm.valid">
                    <ng-template [ngIf]="!isLoading" [ngIfThen]="title" [ngIfElse]="spinner">
                    </ng-template>
                </button>
            </div>
          </div>
      </form>
    </div>
  </div>
</main>

<ng-template #title>
    Save
</ng-template>

<ng-template #spinner>
        <mat-spinner mode="indeterminate" [diameter]="25" [strokeWidth]="3">
        </mat-spinner>
</ng-template>
